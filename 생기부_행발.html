<!DOCTYPE html>
<html>
    <head>
        <title>메인페이지</title>
        <link rel="stylesheet" href="./css/boot_custom.css">
        <link rel="stylesheet" href="./css/design.css">
        <link rel="stylesheet" href="./css/custom.css">
        <link rel="stylesheet" href="./css/ai.css">
        <script src="./js/jquery.min.js"></script>
        <script src="./js/bootstrap.bundle.min.js"></script>
    </head>
    <body>
        <div class="container" style="height: 100vh;">
            <div id="ai-create-container">
                <h3 class="fs_40 fw_700">생활기록부</h3>
                <div id="ai-category">
                    <span class="fw_600 selected">행발</span>
                    <a class="fw_600" href="./생기부_교과세특.html">교과세특</a>
                    <a class="fw_600" href="./생기부_창체.html">창체</a>
                </div>
                <div class="ai-variable dropdown">
                    <div class="title"><span>핵심 역량</span></div>
                    <div id="core" class="ai-input-field" type="button" data-toggle="dropdown" aria-expanded="false">
                        <span id="core_placeholder" class="placeholder">객관식 (복수선택 가능)</span>
                        <span id="selected_core"></span>
                        <div class="dropdown-icon"></div>
                    </div>
                    <div class="dropdown-menu">
                        <button id="core_A" class="dropdown-item" onclick="select_core_option('A');">A</button>
                        <button id="core_B" class="dropdown-item" onclick="select_core_option('B');">B</button>
                        <button id="core_C" class="dropdown-item" onclick="select_core_option('C');">C</button>
                        <button id="core_D" class="dropdown-item" onclick="select_core_option('D');">D</button>
                    </div>
                    <input id="core_value" type="hidden" />
                </div>
                <div class="ai-variable">
                    <div class="title"><span>인원 수</span></div>
                    <input
                        class="ai-input-field"
                        type="number"
                        placeholder="단답식"
                        min="1" 
                        step="1"
                        onkeydown="return event.keyCode !== 190"
                        oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/^0+/, '')" />
                </div>
                <div class="ai-variable dropdown">
                    <div class="title"><span>글자 수</span></div>
                    <div id="text_length" class="ai-input-field" type="button" data-toggle="dropdown" aria-expanded="false">
                        <span id="length_placeholder" class="placeholder">객관식 (600, 700, 1000, 1500 바이트 중 하나 선택)</span>
                        <span id="selected_length"></span>
                        <div class="dropdown-icon"></div>
                    </div>
                    <div class="dropdown-menu">
                        <button id="length_600" class="dropdown-item" onclick="select_length_option('600');">600 바이트</button>
                        <button id="length_700" class="dropdown-item" onclick="select_length_option('700');">700 바이트</button>
                        <button id="length_1000" class="dropdown-item" onclick="select_length_option('1000');">1000 바이트</button>
                        <button id="length_1500" class="dropdown-item" onclick="select_length_option('1500');">1500 바이트</button>
                    </div>
                    <input id="text_length_value" type="hidden" />
                </div>
                <div class="ai-variable">
                    <div class="title"><span>기타 사항</span></div>
                    <input
                        class="ai-input-field"
                        type="text"
                        placeholder="단답식 (없을 시 스킵 가능)" />
                </div>
                <button class="btn-create fw_500">생성하기</button>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        let selectedCores = [];
        const coreOrder = ['A', 'B', 'C', 'D'];
        function select_core_option(core) {
            const $coreBtn = $(`#core_${core}`);
            
            if ($coreBtn.hasClass('selected')) {
                $coreBtn.removeClass('selected');
                selectedCores = selectedCores.filter(item => item !== core);
            } 
            else {
                $coreBtn.addClass('selected');
                selectedCores.push(core);
            }
            
            selectedCores.sort((a, b) => coreOrder.indexOf(a) - coreOrder.indexOf(b));
            
            if (selectedCores.length > 0) {
                $('#core_placeholder').hide();
                $('#selected_core').text(selectedCores.join(', '));
            } else {
                $('#core_placeholder').show();
                $('#selected_core').text('');
            }
            
            $('#core_value').val(selectedCores.join(','));

            return false;
        }

        let selectedLength = null;
        function select_length_option(length) {
            const $lengthBtn = $(`#length_${length}`);

            if ($lengthBtn.hasClass('selected')) {
                return false;
            }

            if (selectedLength !== null) {
                $(`#length_${selectedLength}`).removeClass('selected');
            }
            $lengthBtn.addClass('selected');
            $('#length_placeholder').hide();
            $('#selected_length').text(length + ' 바이트');
            $('#text_length_value').val(length);
            selectedLength = length;

            return false;
        }
    </script>
</html>